@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: dark;
  --toggle-track-bg: #cbd5e1;
  --toggle-thumb-bg: #ffffff;
  --toggle-icon-color: #f59e0b;
  --chart-tooltip-bg: #0f172a;
  --chart-tooltip-border: #334155;
  --chart-tooltip-label: #94a3b8;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: "Manrope", system-ui, sans-serif;
  background:
    radial-gradient(circle at 10% 10%, rgba(34, 211, 238, 0.14), transparent 45%),
    radial-gradient(circle at 85% 20%, rgba(16, 185, 129, 0.12), transparent 40%),
    radial-gradient(circle at 50% 80%, rgba(59, 130, 246, 0.1), transparent 50%),
    #020617;
  color: #e2e8f0;
}

body.light {
  background:
    radial-gradient(circle at 8% 8%, rgba(2, 132, 199, 0.14), transparent 46%),
    radial-gradient(circle at 88% 14%, rgba(20, 184, 166, 0.13), transparent 42%),
    radial-gradient(circle at 54% 82%, rgba(37, 99, 235, 0.1), transparent 52%),
    linear-gradient(180deg, #eaf4fb 0%, #f4f9fc 50%, #eff6fb 100%);
  color: #0f172a;
  --chart-tooltip-bg: #f8fbff;
  --chart-tooltip-border: #94a3b8;
  --chart-tooltip-label: #334155;
}

:root[data-theme="dark"] {
  --toggle-track-bg: #334155;
  --toggle-thumb-bg: #1e293b;
  --toggle-icon-color: #f8fafc;
}

.theme-toggle {
  position: relative;
  width: 52px;
  height: 26px;
  border-radius: 999px;
  background-color: var(--toggle-track-bg);
  border: none;
  cursor: pointer;
  padding: 0;
  transition: background-color 0.4s ease;
  -webkit-tap-highlight-color: transparent;
}

.theme-toggle:focus-visible {
  outline: 2px solid rgba(34, 211, 238, 0.7);
  outline-offset: 2px;
}

.toggle-thumb {
  position: absolute;
  top: 3px;
  left: 3px;
  width: 20px;
  height: 20px;
  border-radius: 999px;
  background-color: var(--toggle-thumb-bg);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), background-color 0.4s ease;
}

:root[data-theme="dark"] .toggle-thumb {
  transform: translateX(26px);
}

.theme-icon {
  width: 14px;
  height: 14px;
  color: var(--toggle-icon-color);
  transition: color 0.4s ease;
  overflow: visible;
}

.sun-core,
.sun-beams,
.moon-cutout {
  transform-origin: center;
  transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1);
}

.sun-beams {
  transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.3s ease;
}

.theme-toggle:hover .sun-beams {
  transform: rotate(15deg);
}

:root[data-theme="dark"] .sun-core {
  transform: scale(1.6);
}

:root[data-theme="dark"] .sun-beams {
  opacity: 0;
  transform: rotate(-45deg) scale(0.5);
}

:root[data-theme="dark"] .moon-cutout {
  transform: translateX(-10px) translateY(8px);
}

body.light .shadow-soft {
  box-shadow: 0 18px 38px -26px rgba(15, 23, 42, 0.32);
}

body.light .bg-slate-900\/80,
body.light .bg-slate-900\/70,
body.light .bg-slate-900\/65,
body.light .bg-slate-900\/60,
body.light .bg-slate-900\/55,
body.light .bg-slate-900\/50,
body.light .bg-slate-900\/45,
body.light .bg-slate-900\/40,
body.light .bg-slate-900\/35,
body.light .bg-slate-900\/30,
body.light .bg-slate-900,
body.light .bg-slate-950\/40,
body.light .bg-slate-950\/30 {
  background-color: rgba(255, 255, 255, 0.86) !important;
}

body.light .bg-slate-800,
body.light .bg-slate-800\/80,
body.light .bg-slate-800\/70,
body.light .bg-slate-800\/60,
body.light .bg-slate-800\/40 {
  background-color: rgba(233, 242, 250, 0.9) !important;
}

body.light .bg-slate-700,
body.light .bg-slate-700\/70,
body.light .bg-slate-700\/60 {
  background-color: rgba(217, 230, 242, 0.9) !important;
}

body.light .border-slate-700,
body.light .border-slate-700\/70,
body.light .border-slate-700\/80,
body.light .border-slate-600,
body.light .border-slate-600\/50 {
  border-color: rgba(148, 163, 184, 0.45) !important;
}

body.light .text-slate-100 {
  color: #0b1220 !important;
}

body.light .text-slate-200 {
  color: #1e293b !important;
}

body.light .text-slate-300 {
  color: #334155 !important;
}

body.light .text-slate-400 {
  color: #475569 !important;
}

body.light .text-slate-500 {
  color: #64748b !important;
}

body.light .text-cyan-200 {
  color: #0e7490 !important;
}

body.light .text-cyan-300 {
  color: #0891b2 !important;
}

body.light .text-emerald-100 {
  color: #064e3b !important;
}

body.light .text-emerald-200 {
  color: #065f46 !important;
}

body.light .text-emerald-300 {
  color: #0f766e !important;
}

body.light .text-rose-100 {
  color: #881337 !important;
}

body.light .text-rose-200 {
  color: #9f1239 !important;
}

body.light .text-rose-300 {
  color: #be123c !important;
}

body.light .text-amber-100 {
  color: #78350f !important;
}

body.light .text-amber-200 {
  color: #92400e !important;
}

body.light .text-amber-300 {
  color: #b45309 !important;
}

body.light .hover\:bg-slate-800\/70:hover {
  background-color: rgba(220, 232, 244, 0.95) !important;
}

body.light .hover\:text-slate-100:hover {
  color: #0f172a !important;
}

body.light .bg-cyan-500\/20 {
  background-color: rgba(6, 182, 212, 0.18) !important;
}

body.light .bg-cyan-500\/10 {
  background-color: rgba(6, 182, 212, 0.12) !important;
}

body.light .bg-emerald-500\/10 {
  background-color: rgba(16, 185, 129, 0.12) !important;
}

body.light .bg-rose-500\/10 {
  background-color: rgba(244, 63, 94, 0.11) !important;
}

body.light .bg-amber-500\/10 {
  background-color: rgba(245, 158, 11, 0.16) !important;
}

body.light .bg-emerald-500\/20 {
  background-color: rgba(16, 185, 129, 0.2) !important;
}

body.light .bg-rose-500\/20 {
  background-color: rgba(244, 63, 94, 0.16) !important;
}

body.light .bg-gradient-to-br.from-cyan-400\/20.to-emerald-400\/15 {
  background-image: linear-gradient(
    to bottom right,
    rgba(8, 145, 178, 0.24),
    rgba(20, 184, 166, 0.2)
  ) !important;
}

body.light .brand-card {
  border: 1px solid rgba(14, 116, 144, 0.18);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.35);
}

body.light .brand-kicker {
  color: #0e7490 !important;
}

body.light .brand-title {
  color: #0f172a !important;
}

body.light .brand-subtitle {
  color: #334155 !important;
}

body.light .brand-logo {
  filter: drop-shadow(0 6px 14px rgba(15, 23, 42, 0.16));
}

body.light .sidebar-protocol-card {
  border-color: rgba(14, 116, 144, 0.28) !important;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.96) 0%, rgba(237, 248, 255, 0.92) 100%) !important;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.64);
}

body.light .checkins-hero {
  border-color: rgba(148, 163, 184, 0.5) !important;
  background: linear-gradient(180deg, rgba(233, 244, 253, 0.96) 0%, rgba(224, 238, 250, 0.93) 100%) !important;
}

body.light .checkins-trend-card,
body.light .checkins-history-card {
  border-color: rgba(148, 163, 184, 0.48) !important;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, rgba(240, 247, 253, 0.91) 100%) !important;
}

body.light .checkins-trend-chart .recharts-cartesian-grid line {
  stroke: rgba(100, 116, 139, 0.45) !important;
}

body.light .checkins-trend-chart .recharts-xAxis .recharts-cartesian-axis-tick-value,
body.light .checkins-trend-chart .recharts-yAxis .recharts-cartesian-axis-tick-value {
  fill: #475569 !important;
}

body.light .checkin-primary-btn {
  border-color: rgba(8, 145, 178, 0.45) !important;
  background: rgba(8, 145, 178, 0.2) !important;
  color: #0c4a6e !important;
}

body.light .checkin-primary-btn:hover {
  border-color: rgba(14, 116, 144, 0.6) !important;
  background: rgba(8, 145, 178, 0.28) !important;
  color: #083344 !important;
}

body.light .report-highlight-chip {
  border: 1px solid rgba(148, 163, 184, 0.5);
}

body.light .report-highlight-chip.bg-slate-800\/60 {
  background: rgba(226, 239, 250, 0.96) !important;
  color: #1e293b !important;
}

body.light .report-highlight-chip .text-slate-400 {
  color: #475569 !important;
}

body.light .report-highlight-chip .text-slate-200 {
  color: #0f172a !important;
}

body.light .supplement-history-row {
  border-color: rgba(148, 163, 184, 0.45) !important;
  background: rgba(241, 247, 253, 0.95) !important;
  color: #1e293b !important;
}

body.light .dose-model-details {
  border-color: rgba(148, 163, 184, 0.5) !important;
  background: rgba(237, 245, 252, 0.95) !important;
  color: #334155 !important;
}

body.light .settings-danger-card {
  border-color: rgba(239, 68, 68, 0.35) !important;
  background: rgba(254, 242, 242, 0.96) !important;
}

body.light .settings-danger-btn {
  border-color: rgba(239, 68, 68, 0.45) !important;
  background: rgba(254, 226, 226, 0.95) !important;
  color: #b91c1c !important;
}

body.light .settings-danger-btn:hover {
  background: rgba(254, 202, 202, 0.95) !important;
  color: #991b1b !important;
}

body.light .settings-core-toggles {
  border-color: rgba(14, 116, 144, 0.35) !important;
  background: linear-gradient(180deg, rgba(238, 249, 246, 0.95) 0%, rgba(230, 244, 241, 0.92) 100%) !important;
}

body.light .settings-core-toggles .bg-slate-800 {
  background-color: rgba(240, 247, 253, 0.95) !important;
}

body.light .settings-restore-btn {
  border-color: rgba(239, 68, 68, 0.45) !important;
  background: rgba(254, 226, 226, 0.95) !important;
  color: #b91c1c !important;
}

body.light .settings-restore-btn:hover {
  background: rgba(254, 202, 202, 0.95) !important;
  color: #991b1b !important;
}

.settings-card {
  box-shadow: 0 10px 24px -22px rgba(2, 6, 23, 0.75);
}

.settings-toggle-row > label {
  min-height: 2.25rem;
}

.settings-action-row > button,
.settings-action-row > label {
  min-height: 2.35rem;
}

.ai-consent-checkbox {
  accent-color: #06b6d4;
}

body.light .ai-consent-modal {
  background: #f8fbff !important;
  border-color: rgba(148, 163, 184, 0.5) !important;
}

body.light .ai-consent-panel {
  background: #edf4fb !important;
  border-color: rgba(148, 163, 184, 0.5) !important;
  color: #1e293b !important;
}

body.light .ai-consent-option {
  background: #ffffff !important;
  border-color: rgba(148, 163, 184, 0.55) !important;
  color: #1e293b !important;
}

body.light .ai-consent-warning {
  background: rgba(245, 158, 11, 0.1) !important;
  border-color: rgba(217, 119, 6, 0.45) !important;
  color: #92400e !important;
}

body.light .ai-consent-modal .text-slate-400,
body.light .ai-consent-modal .text-slate-300,
body.light .ai-consent-modal .text-slate-200,
body.light .ai-consent-modal .text-slate-100 {
  color: #1e293b !important;
}

body.light .settings-card {
  border-color: rgba(148, 163, 184, 0.5) !important;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.96) 0%, rgba(241, 248, 254, 0.93) 100%) !important;
}

.mobile-menu-shell {
  padding-top: calc(0.5rem + env(safe-area-inset-top));
  padding-bottom: calc(0.5rem + env(safe-area-inset-bottom));
}

body.light .upload-panel-shell {
  border-color: rgba(14, 116, 144, 0.3) !important;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, rgba(240, 249, 255, 0.92) 100%) !important;
}

body.light .upload-panel-shell:hover {
  border-color: rgba(6, 182, 212, 0.5) !important;
}

body.light .upload-panel-dropzone {
  border: 1px dashed rgba(14, 116, 144, 0.25);
  background: linear-gradient(180deg, rgba(236, 253, 255, 0.9) 0%, rgba(224, 242, 254, 0.88) 100%);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4);
}

body.light .welcome-hero {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, rgba(242, 249, 255, 0.92) 100%) !important;
  border-color: rgba(148, 163, 184, 0.45) !important;
}

body.light .welcome-hero-feature {
  background: linear-gradient(180deg, rgba(235, 245, 255, 0.9) 0%, rgba(226, 238, 251, 0.84) 100%) !important;
  border-color: rgba(148, 163, 184, 0.38) !important;
}

body.light .welcome-hero-step {
  background-color: rgba(234, 243, 252, 0.88) !important;
  border-color: rgba(148, 163, 184, 0.36) !important;
}

body.light .analysis-latest-btn:disabled {
  opacity: 0.82 !important;
  color: #475569 !important;
  border-color: rgba(148, 163, 184, 0.55) !important;
  background-color: rgba(226, 232, 240, 0.8) !important;
}

.alerts-panel-predictive,
.alerts-panel-actionable,
.alerts-panel-positive {
  box-shadow: inset 0 1px 0 rgba(148, 163, 184, 0.14);
}

.alerts-panel-predictive {
  background: linear-gradient(
      150deg,
      rgba(129, 140, 248, 0.09) 0%,
      rgba(34, 211, 238, 0.07) 35%,
      rgba(15, 23, 42, 0.84) 100%
    ) !important;
}

.alerts-panel-actionable {
  background: linear-gradient(
      160deg,
      rgba(245, 158, 11, 0.11) 0%,
      rgba(244, 63, 94, 0.08) 42%,
      rgba(15, 23, 42, 0.84) 100%
    ) !important;
}

.alerts-panel-positive {
  background: linear-gradient(
      160deg,
      rgba(16, 185, 129, 0.11) 0%,
      rgba(45, 212, 191, 0.08) 40%,
      rgba(15, 23, 42, 0.84) 100%
    ) !important;
}

.alerts-card-predictive,
.alerts-card-actionable,
.alerts-card-positive {
  box-shadow:
    inset 0 1px 0 rgba(148, 163, 184, 0.14),
    0 10px 24px -22px rgba(2, 6, 23, 0.55);
}

body.light .alerts-hero {
  background: linear-gradient(180deg, rgba(226, 239, 250, 0.96) 0%, rgba(216, 232, 245, 0.94) 100%) !important;
  border-color: rgba(148, 163, 184, 0.5) !important;
}

body.light .alerts-panel-predictive {
  background: linear-gradient(
      150deg,
      rgba(224, 231, 255, 0.95) 0%,
      rgba(224, 242, 254, 0.93) 45%,
      rgba(241, 245, 249, 0.94) 100%
    ) !important;
  border-color: rgba(129, 140, 248, 0.32) !important;
}

body.light .alerts-panel-actionable {
  background: linear-gradient(
      155deg,
      rgba(255, 237, 213, 0.94) 0%,
      rgba(255, 228, 230, 0.92) 42%,
      rgba(248, 250, 252, 0.94) 100%
    ) !important;
  border-color: rgba(244, 114, 182, 0.3) !important;
}

body.light .alerts-panel-positive {
  background: linear-gradient(
      155deg,
      rgba(220, 252, 231, 0.92) 0%,
      rgba(204, 251, 241, 0.9) 45%,
      rgba(240, 253, 250, 0.92) 100%
    ) !important;
  border-color: rgba(16, 185, 129, 0.32) !important;
}

body.light .positive-alert-card {
  background: linear-gradient(180deg, rgba(220, 252, 231, 0.72) 0%, rgba(209, 250, 229, 0.6) 100%) !important;
  border-color: rgba(16, 185, 129, 0.42) !important;
}

body.light .positive-alert-card .text-emerald-200\/90,
body.light .positive-alert-card .text-emerald-200\/80 {
  color: #065f46 !important;
}

body.light .medical-disclaimer {
  background: linear-gradient(180deg, rgba(254, 243, 199, 0.82) 0%, rgba(253, 230, 138, 0.62) 100%) !important;
  border-color: rgba(245, 158, 11, 0.42) !important;
}

body.light .chart-tooltip,
body.light .chart-tooltip-mini,
body.light .marker-info-tooltip {
  background: rgba(248, 252, 255, 0.97) !important;
  border-color: rgba(148, 163, 184, 0.55) !important;
  color: #1e293b !important;
  box-shadow: 0 14px 30px -22px rgba(15, 23, 42, 0.45) !important;
}

body.light .chart-tooltip .text-slate-100,
body.light .chart-tooltip-mini .text-slate-100,
body.light .marker-info-tooltip .text-slate-100 {
  color: #0f172a !important;
}

body.light .chart-tooltip .text-slate-200,
body.light .chart-tooltip-mini .text-slate-200,
body.light .marker-info-tooltip .text-slate-200 {
  color: #1e293b !important;
}

body.light .chart-tooltip .text-slate-300,
body.light .chart-tooltip-mini .text-slate-300,
body.light .marker-info-tooltip .text-slate-300 {
  color: #334155 !important;
}

body.light .chart-tooltip .text-cyan-200,
body.light .chart-tooltip-mini .text-cyan-200,
body.light .marker-info-tooltip .text-cyan-200 {
  color: #0e7490 !important;
}

body.light .chart-tooltip .text-amber-200,
body.light .chart-tooltip-mini .text-amber-200 {
  color: #92400e !important;
}

.review-context-card {
  box-shadow: inset 0 1px 0 rgba(148, 163, 184, 0.14);
}

.review-context-input {
  transition:
    border-color 0.18s ease,
    box-shadow 0.18s ease,
    background-color 0.18s ease;
}

.review-context-input:focus {
  outline: none;
  border-color: rgba(6, 182, 212, 0.62) !important;
  box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.14);
}

.review-suggestion-menu {
  max-height: 220px;
  overflow-y: auto;
  border: 1px solid rgba(100, 116, 139, 0.7);
  background: rgba(15, 23, 42, 0.97);
  box-shadow: 0 14px 30px -18px rgba(2, 6, 23, 0.6);
}

.review-suggestion-item {
  color: #cbd5e1;
  border-bottom: 1px solid rgba(51, 65, 85, 0.75);
}

.review-suggestion-item:last-child {
  border-bottom: none;
}

.review-suggestion-item:hover {
  background: rgba(8, 145, 178, 0.22);
  color: #ecfeff;
}

body.light .review-context-card {
  background: linear-gradient(180deg, rgba(243, 250, 255, 0.92) 0%, rgba(235, 245, 252, 0.88) 100%) !important;
  border-color: rgba(148, 163, 184, 0.45) !important;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.6),
    0 10px 20px -18px rgba(15, 23, 42, 0.35);
}

body.light .review-context-input {
  background: rgba(255, 255, 255, 0.94) !important;
  border-color: rgba(148, 163, 184, 0.55) !important;
  color: #0f172a !important;
}

body.light .review-context-input::placeholder {
  color: #64748b;
}

body.light .review-suggestion-menu {
  border-color: rgba(148, 163, 184, 0.55);
  background: rgba(255, 255, 255, 0.98);
  box-shadow: 0 18px 30px -22px rgba(15, 23, 42, 0.45);
}

body.light .review-suggestion-item {
  color: #0f172a;
  border-bottom-color: rgba(203, 213, 225, 0.75);
}

body.light .review-suggestion-item:hover {
  background: rgba(186, 230, 253, 0.6);
  color: #0c4a6e;
}

.dose-premium-shell {
  border-color: rgba(100, 116, 139, 0.45);
  background:
    radial-gradient(circle at 80% 12%, rgba(56, 189, 248, 0.08), transparent 38%),
    radial-gradient(circle at 20% 85%, rgba(16, 185, 129, 0.06), transparent 40%),
    rgba(15, 23, 42, 0.52);
}

.dose-premium-card {
  border-color: rgba(100, 116, 139, 0.46);
  background:
    linear-gradient(180deg, rgba(15, 23, 42, 0.68) 0%, rgba(15, 23, 42, 0.46) 100%),
    rgba(15, 23, 42, 0.56);
  box-shadow: 0 14px 24px -20px rgba(2, 6, 23, 0.72);
}

.dose-premium-card-locked {
  filter: saturate(0.88);
}

.dose-source-badge {
  border-color: rgba(6, 182, 212, 0.35);
  background: rgba(6, 182, 212, 0.12);
  color: #a5f3fc;
}

.dose-confidence-badge {
  border-color: rgba(16, 185, 129, 0.35);
  background: rgba(16, 185, 129, 0.12);
  color: #bbf7d0;
}

.dose-stat-card {
  border-color: rgba(71, 85, 105, 0.6);
  background: rgba(15, 23, 42, 0.36);
}

.dose-control-chip {
  border-color: rgba(100, 116, 139, 0.55);
  background: rgba(15, 23, 42, 0.42);
}

.dose-accordion-card {
  transition: border-color 0.18s ease, box-shadow 0.18s ease, background-color 0.18s ease;
}

.dose-accordion-card:has(.dose-accordion-trigger[aria-expanded="true"]) {
  border-color: rgba(6, 182, 212, 0.36);
  box-shadow: 0 16px 30px -24px rgba(8, 145, 178, 0.42);
}

.dose-accordion-trigger {
  border-radius: 0.8rem;
  padding: 0.15rem;
}

.dose-accordion-chip {
  border-color: rgba(100, 116, 139, 0.52);
  background: rgba(15, 23, 42, 0.44);
}

.dose-projection-context-note {
  border-color: rgba(100, 116, 139, 0.56);
  background: rgba(15, 23, 42, 0.4);
}

body.light .dose-premium-shell {
  border-color: rgba(148, 163, 184, 0.45);
  background:
    radial-gradient(circle at 80% 12%, rgba(14, 116, 144, 0.12), transparent 38%),
    radial-gradient(circle at 15% 84%, rgba(13, 148, 136, 0.11), transparent 40%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.96) 0%, rgba(239, 248, 255, 0.94) 100%);
  box-shadow: 0 14px 28px -20px rgba(15, 23, 42, 0.34);
}

body.light .dose-premium-card {
  border-color: rgba(148, 163, 184, 0.48);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.96) 0%, rgba(240, 247, 254, 0.92) 100%);
  box-shadow: 0 12px 22px -18px rgba(15, 23, 42, 0.24);
}

body.light .dose-source-badge {
  border-color: rgba(8, 145, 178, 0.38);
  background: rgba(8, 145, 178, 0.12);
  color: #155e75;
}

body.light .dose-confidence-badge {
  border-color: rgba(16, 185, 129, 0.4);
  background: rgba(16, 185, 129, 0.11);
  color: #065f46;
}

body.light .dose-stat-card {
  border-color: rgba(148, 163, 184, 0.5);
  background: rgba(255, 255, 255, 0.84);
}

body.light .dose-control-chip {
  border-color: rgba(148, 163, 184, 0.55);
  background: rgba(255, 255, 255, 0.8);
}

body.light .dose-accordion-chip {
  border-color: rgba(148, 163, 184, 0.5);
  background: rgba(255, 255, 255, 0.82);
}

body.light .dose-accordion-card:has(.dose-accordion-trigger[aria-expanded="true"]) {
  border-color: rgba(8, 145, 178, 0.36);
  box-shadow: 0 14px 22px -16px rgba(8, 145, 178, 0.22);
}

body.light .dose-projection-context-note {
  border-color: rgba(148, 163, 184, 0.55);
  background: rgba(255, 255, 255, 0.84);
}

@media (max-width: 640px) {
  .dose-control-chip-row {
    gap: 0.3rem;
  }

  .dose-control-chip {
    padding-inline: 0.5rem;
    padding-block: 0.2rem;
    font-size: 0.68rem;
  }

  .dose-accordion-chip {
    font-size: 0.64rem;
    padding-inline: 0.4rem;
  }
}

.protocol-impact-premium-shell {
  border-color: rgba(100, 116, 139, 0.55);
  background:
    radial-gradient(circle at 84% 16%, rgba(6, 182, 212, 0.08), transparent 44%),
    radial-gradient(circle at 18% 84%, rgba(14, 165, 233, 0.05), transparent 50%),
    rgba(15, 23, 42, 0.58);
}

.protocol-impact-event-shell {
  border-color: rgba(100, 116, 139, 0.55);
  background: linear-gradient(180deg, rgba(15, 23, 42, 0.64) 0%, rgba(15, 23, 42, 0.5) 100%);
  box-shadow: 0 16px 32px -24px rgba(2, 6, 23, 0.82);
}

.protocol-impact-status-pill {
  font-weight: 600;
}

.protocol-impact-story-row {
  line-height: 1.5;
  overflow-wrap: anywhere;
}

.protocol-impact-emoji-label {
  font-weight: 600;
  color: #e2e8f0;
}

.protocol-impact-story-block {
  color: #cbd5e1;
}

.protocol-impact-header-minimal {
  display: block;
}

.protocol-impact-jumpbar {
  scrollbar-width: thin;
  scrollbar-color: rgba(148, 163, 184, 0.45) transparent;
}

.protocol-impact-jump-chip {
  border-color: rgba(100, 116, 139, 0.55);
  background: rgba(15, 23, 42, 0.5);
  white-space: nowrap;
  max-width: 320px;
  overflow: hidden;
  text-overflow: ellipsis;
  transition: border-color 160ms ease, background-color 160ms ease;
}

.protocol-impact-jump-chip:hover {
  border-color: rgba(56, 189, 248, 0.55);
  background: rgba(8, 47, 73, 0.45);
}

.protocol-impact-filter-toggle {
  border-color: rgba(100, 116, 139, 0.55);
  background: rgba(2, 6, 23, 0.2);
}

.protocol-impact-event-anchor:target .protocol-impact-event-shell {
  border-color: rgba(56, 189, 248, 0.58);
  box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.2), 0 16px 32px -24px rgba(2, 6, 23, 0.82);
}

.protocol-impact-effect-tile {
  border-color: rgba(100, 116, 139, 0.45);
  background: rgba(2, 6, 23, 0.24);
  min-width: 0;
  min-height: 200px;
}

.protocol-impact-effects-grid {
  grid-auto-rows: 1fr;
}

.protocol-impact-effect-head {
  min-height: 0;
}

.protocol-impact-effect-title {
  line-height: 1.25;
  overflow-wrap: anywhere;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  min-height: 2.5em;
}

.protocol-impact-effect-summary {
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-height: 1.2em;
}

.protocol-impact-context-chip {
  border-color: rgba(100, 116, 139, 0.55);
  background: rgba(30, 41, 59, 0.56);
  color: #dbeafe;
  max-width: 100%;
  overflow-wrap: anywhere;
}

.protocol-impact-status-early {
  border-color: rgba(168, 85, 247, 0.35);
  background: rgba(88, 28, 135, 0.23);
  color: #e9d5ff;
}

.protocol-impact-status-building {
  border-color: rgba(245, 158, 11, 0.42);
  background: rgba(146, 64, 14, 0.24);
  color: #fde68a;
}

.protocol-impact-status-established {
  border-color: rgba(16, 185, 129, 0.42);
  background: rgba(6, 78, 59, 0.24);
  color: #bbf7d0;
}

.protocol-impact-delta-rail {
  border: 1px solid rgba(100, 116, 139, 0.42);
  border-radius: 0.7rem;
  padding: 0.55rem 0.62rem;
  background: rgba(15, 23, 42, 0.45);
  min-height: 82px;
  overflow: hidden;
}

.protocol-impact-delta-percent-circle {
  display: inline-flex;
  align-items: center;
  gap: 0.32rem;
  border-radius: 999px;
  border: 1px solid rgba(56, 189, 248, 0.32);
  background: rgba(8, 47, 73, 0.3);
  padding: 0.32rem 0.68rem;
  font-size: 0.9rem;
  line-height: 1;
  font-weight: 700;
  letter-spacing: 0.01em;
  white-space: nowrap;
}

.protocol-impact-delta-rail-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 58px;
  color: #94a3b8;
  text-align: center;
  grid-template-columns: 1fr;
}

.protocol-impact-delta-side {
  display: flex;
  flex-direction: column;
  gap: 0.18rem;
  min-width: 0;
}

.protocol-impact-delta-side-right {
  align-items: flex-end;
  text-align: right;
}

.protocol-impact-delta-caption {
  font-size: 10px;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  line-height: 1.1;
}

.protocol-impact-delta-value {
  display: inline-flex;
  align-items: baseline;
  gap: 0.33rem;
  min-width: 0;
  white-space: nowrap;
}

.protocol-impact-delta-number {
  color: #f8fafc;
  font-size: 0.98rem;
  line-height: 1;
  font-weight: 700;
  white-space: nowrap;
  overflow-wrap: normal;
}

.protocol-impact-delta-unit {
  font-size: 0.78rem;
  line-height: 1;
  font-weight: 600;
  color: #cbd5e1;
  letter-spacing: 0.01em;
  white-space: nowrap;
  min-width: 0;
  overflow-wrap: normal;
  word-break: keep-all;
}

.protocol-impact-delta-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.32rem;
  min-width: 0;
}

.protocol-impact-delta-direction-dot {
  width: 2.2rem;
  height: 2.2rem;
  border-radius: 999px;
  border: 1px solid rgba(56, 189, 248, 0.45);
  background: radial-gradient(circle at 32% 28%, rgba(125, 211, 252, 0.45), rgba(2, 132, 199, 0.24));
  box-shadow: inset 0 0 0 1px rgba(14, 165, 233, 0.16);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.protocol-impact-delta-direction-dot-up {
  border-color: rgba(56, 189, 248, 0.45);
  background: radial-gradient(circle at 32% 28%, rgba(125, 211, 252, 0.45), rgba(2, 132, 199, 0.24));
}

.protocol-impact-delta-direction-dot-down {
  border-color: rgba(251, 113, 133, 0.45);
  background: radial-gradient(circle at 32% 28%, rgba(253, 164, 175, 0.35), rgba(159, 18, 57, 0.25));
}

.protocol-impact-delta-direction-dot-flat {
  border-color: rgba(148, 163, 184, 0.45);
  background: radial-gradient(circle at 32% 28%, rgba(203, 213, 225, 0.32), rgba(30, 41, 59, 0.3));
}

.protocol-impact-tech-details {
  border-color: rgba(100, 116, 139, 0.55);
  background: rgba(2, 6, 23, 0.24);
}

.protocol-impact-footer-note {
  border-color: rgba(245, 158, 11, 0.28);
  background: rgba(120, 53, 15, 0.14);
}

body.light .protocol-impact-premium-shell {
  border-color: rgba(148, 163, 184, 0.45);
  background:
    radial-gradient(circle at 86% 14%, rgba(14, 165, 233, 0.1), transparent 43%),
    radial-gradient(circle at 14% 82%, rgba(13, 148, 136, 0.08), transparent 44%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.96) 0%, rgba(239, 248, 255, 0.93) 100%);
  box-shadow: 0 14px 28px -20px rgba(15, 23, 42, 0.32);
}

body.light .protocol-impact-event-shell {
  border-color: rgba(148, 163, 184, 0.5);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.97) 0%, rgba(241, 247, 254, 0.92) 100%);
  box-shadow: 0 14px 28px -20px rgba(15, 23, 42, 0.28);
}

body.light .protocol-impact-emoji-label {
  color: #0f172a;
}

body.light .protocol-impact-story-block {
  color: #334155;
}

body.light .protocol-impact-jump-chip {
  border-color: rgba(148, 163, 184, 0.58);
  background: rgba(241, 245, 249, 0.95);
  color: #0f172a;
}

body.light .protocol-impact-jump-chip:hover {
  border-color: rgba(14, 116, 144, 0.58);
  background: rgba(224, 242, 254, 0.88);
}

body.light .protocol-impact-filter-toggle {
  border-color: rgba(148, 163, 184, 0.55);
  background: rgba(248, 250, 252, 0.96);
}

body.light .protocol-impact-event-anchor:target .protocol-impact-event-shell {
  border-color: rgba(14, 116, 144, 0.5);
  box-shadow: 0 0 0 2px rgba(14, 116, 144, 0.16), 0 14px 28px -20px rgba(15, 23, 42, 0.28);
}

body.light .protocol-impact-effect-tile {
  border-color: rgba(148, 163, 184, 0.5);
  background: rgba(255, 255, 255, 0.78);
}

body.light .protocol-impact-context-chip {
  border-color: rgba(148, 163, 184, 0.55);
  background: rgba(241, 245, 249, 0.95);
  color: #1e293b;
}

body.light .protocol-impact-status-early {
  border-color: rgba(147, 51, 234, 0.32);
  background: rgba(233, 213, 255, 0.8);
  color: #6b21a8;
}

body.light .protocol-impact-status-building {
  border-color: rgba(217, 119, 6, 0.35);
  background: rgba(253, 230, 138, 0.62);
  color: #92400e;
}

body.light .protocol-impact-status-established {
  border-color: rgba(22, 163, 74, 0.42);
  background: rgba(187, 247, 208, 0.7);
  color: #166534;
}

body.light .protocol-impact-delta-rail {
  border-color: rgba(148, 163, 184, 0.5);
  background: rgba(255, 255, 255, 0.88);
}

body.light .protocol-impact-delta-percent-circle {
  border-color: rgba(14, 116, 144, 0.32);
  background: rgba(224, 242, 254, 0.88);
}

body.light .protocol-impact-delta-caption {
  color: #64748b;
}

body.light .protocol-impact-delta-number {
  color: #0f172a;
}

body.light .protocol-impact-delta-unit {
  color: #334155;
}

body.light .protocol-impact-delta-direction-dot {
  border-color: rgba(14, 116, 144, 0.45);
  background: radial-gradient(circle at 30% 25%, rgba(186, 230, 253, 0.88), rgba(125, 211, 252, 0.67));
  box-shadow: inset 0 0 0 1px rgba(14, 116, 144, 0.14);
}

body.light .protocol-impact-delta-direction-dot-down {
  border-color: rgba(225, 29, 72, 0.45);
  background: radial-gradient(circle at 30% 25%, rgba(254, 205, 211, 0.88), rgba(251, 113, 133, 0.67));
}

body.light .protocol-impact-delta-direction-dot-flat {
  border-color: rgba(148, 163, 184, 0.55);
  background: radial-gradient(circle at 30% 25%, rgba(226, 232, 240, 0.92), rgba(148, 163, 184, 0.52));
}

body.light .protocol-impact-tech-details {
  border-color: rgba(148, 163, 184, 0.55);
  background: rgba(255, 255, 255, 0.82);
}

body.light .protocol-impact-footer-note {
  border-color: rgba(217, 119, 6, 0.35);
  background: rgba(255, 251, 235, 0.96);
  color: #92400e;
}

@media (max-width: 768px) {
  .protocol-impact-effect-tile {
    min-height: 0;
  }

  .protocol-impact-effect-head {
    min-height: 64px;
  }

  .protocol-impact-delta-rail {
    min-height: 0;
  }

  .protocol-impact-delta-side-right {
    align-items: flex-end;
    text-align: right;
  }

  .protocol-impact-delta-direction-dot {
    width: 1.85rem;
    height: 1.85rem;
  }
}

#root {
  min-height: 100vh;
}

.fade-in {
  animation: fadeIn 250ms ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ── Wellbeing check-in range sliders ── */
.checkin-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #06b6d4;
  cursor: pointer;
  border: 2px solid #0f172a;
  box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.2);
  transition: box-shadow 0.15s ease;
}
.checkin-slider::-webkit-slider-thumb:hover {
  box-shadow: 0 0 0 5px rgba(6, 182, 212, 0.25);
}
.checkin-slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #06b6d4;
  cursor: pointer;
  border: 2px solid #0f172a;
  box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.2);
}
